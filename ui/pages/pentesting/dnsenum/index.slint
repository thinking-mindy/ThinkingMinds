import { HorizontalBox, VerticalBox, StandardTableView, GroupBox, LineEdit, ComboBox, Button, StandardListView, ListView,Palette, ProgressIndicator} from "std-widgets.slint";
import {PortScanner} from "../../../globals.slint";
import {Theme} from "../../../theme.slint";

export component DnsScreen inherits VerticalBox {
            GroupBox {
                HorizontalBox {
                    spacing: 5px;
                    ip := LineEdit {
                        placeholder-text: @tr("Domain Name (i.e example.com)");
                        input-type: text;
                    }

                    Button {
                        text: "Scan ";
                        clicked => {
                            if ip.text=="localhost" || ip.text==""{
                            }else{
                            }
                        }
                    }
                }
            }
            if PortScanner.v_ip:
            Text {
                color: red;
                text: "Please enter a valid host name/ip address.";
                horizontal-alignment: center;
            }
            
            if PortScanner.loading: ProgressIndicator{indeterminate:true;}
            
            GroupBox {
                title: @tr("Sub-domains");
                VerticalBox {
                    HorizontalBox {
                        //visible: PortScanner.open_ports.length>0;
                        subdomains:=StandardListView {
                            model: PortScanner.open_ports;
                            current-item: 0;
                
                        }
                        VerticalBox {
                            Button {
                                text: "Attack domain "+subdomains.model[ports.current-item].text;

                            }
                            Button {
                                text: "Brute-Force "+subdomains.model[ports.current-item].text;
                            }
                        }
                    }
                
                    Text {
                        visible: PortScanner.open_ports.length<1;
                        horizontal-alignment: center;
                        text: "No results yet";
                        font-weight: Theme.typo.header.weight;
                    }

                }
            }
            GroupBox {
                title: @tr("Other Domain Info");
                VerticalBox {
                    HorizontalBox {
                        //visible: PortScanner.open_ports.length>0;
                        ports:=StandardListView {
                            model: PortScanner.open_ports;
                            current-item: 0;
                        }
                    }
                    Text {
                        visible: PortScanner.open_ports.length<1;
                        horizontal-alignment: center;
                        text: "No results yet";
                        font-weight: Theme.typo.header.weight;
                    }

                }
            }
}
