
import { HorizontalBox, VerticalBox, StandardTableView, GroupBox, LineEdit, ComboBox, Button, StandardListView, ListView,Palette, ProgressIndicator} from "std-widgets.slint";
import {Wifi} from "../../../globals.slint";
import {Theme} from "../../../theme.slint";
import { SLoading } from "../../../modules/surrealism-ui/index.slint";

export component WifiScreen inherits VerticalBox{
        alignment:start;
        VerticalBox {
        if Wifi.wifi_names.length==0 || Wifi.loading:
            GroupBox {
                VerticalBox {
                    spacing: 5px;
                    Text {
                        text:"Wifi Pentesting";
                        horizontal-alignment: center;
                    }
                    Button {
                        text: "Scan Networks";
                        clicked => {Wifi.scan_wifi()}
                    }
                }
            }
            
            if !Wifi.loading: VerticalBox {
                Rectangle {
                    loading := SLoading {
                        text: "Scanning networks...";
                        background: Theme.palette.background;
                        theme: Palette.color-scheme == ColorScheme.dark ? Dark : Light;
                        font-color: Theme.palette.text;
                        font-weight: 900;
                    }
                }
            }
            GroupBox {
                title: @tr("Select network:");
                VerticalBox {
                    Rectangle{
                        ports:=StandardListView {
                            model: Wifi.wifi_names;
                            current-item: 0;
                            max-height: 400px;
                        }
                        Text {
                            visible: Wifi.wifi_names.length<1;
                            horizontal-alignment: center;
                            text: "No networks found.";
                            font-weight: Theme.typo.header.weight;
                        }
                    }
                        Button {text: "Attack "+ports.model[ports.current-item].text;clicked => {Wifi.attack_wifi()}}
                }
            }
        }
}
